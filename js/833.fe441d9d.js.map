{"version":3,"file":"js/833.fe441d9d.js","mappings":"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","sources":["webpack://standart-project/./node_modules/core-js/internals/delete-property-or-throw.js","webpack://standart-project/./node_modules/core-js/modules/es.array.unshift.js","webpack://standart-project/./src/router/views/CartView.vue","webpack://standart-project/./src/router/views/CartView.vue?9dda","webpack://standart-project/./src/scripts/components/vTable.vue","webpack://standart-project/./src/scripts/components/vList.vue","webpack://standart-project/./src/scripts/components/vList.vue?10f6","webpack://standart-project/./src/scripts/components/vTable.vue?4156"],"sourcesContent":["'use strict';\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\n\n// IE8-\nvar INCORRECT_RESULT = [].unshift(0) !== 1;\n\n// V8 ~ Chrome < 71 and Safari <= 15.4, FF < 23 throws InternalError\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).unshift();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_RESULT || !properErrorOnNonWritableLength();\n\n// `Array.prototype.unshift` method\n// https://tc39.es/ecma262/#sec-array.prototype.unshift\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  unshift: function unshift(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    if (argCount) {\n      doesNotExceedSafeInteger(len + argCount);\n      var k = len;\n      while (k--) {\n        var to = k + argCount;\n        if (k in O) O[to] = O[k];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (var j = 0; j < argCount; j++) {\n        O[j] = arguments[j];\n      }\n    } return setArrayLength(O, len + argCount);\n  }\n});\n","<template>\r\n  <section class=\"page cart\" v-cloak>\r\n    \r\n    <div class=\"cart__container\">\r\n      <v-table\r\n        :header=\"[\r\n          { name: 'Название', path: 'title', subpath: null, prefix: null },\r\n          { name: 'Возраст', path: 'ageLimit', subpath: 'name', prefix: '+' },\r\n          { name: 'Кратегория', path: 'category', subpath: 'name', prefix: null },\r\n          { name: 'Количество', path: 'quantity', subpath: null, prefix: null },\r\n          { name: 'Цена за шт', path: 'price', subpath: null, prefix: '$' },\r\n        ]\"\r\n\r\n        :body=\"getAllProductInCart\"\r\n      ></v-table>\r\n      \r\n      \r\n      <p class=\"cart__total-price\">Общая цена: {{ totalPrice }}$</p>\r\n      <button class=\"cart__btn\" @click=\"buyAllCard\">купить</button>\r\n    </div>\r\n\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport vTable from '@/scripts/components/vTable.vue'\r\nimport { mapGetters, mapMutations } from 'vuex'\r\nimport router from '..'\r\n\r\nexport default {\r\n  name: 'CartView',\r\n\r\n  data: () => ({\r\n \r\n  }),\r\n\r\n  watch: {\r\n\r\n  },\r\n  \r\n  methods: {\r\n    ...mapMutations([\r\n      'clearCart',\r\n      'setError',\r\n    ]),\r\n\r\n    buyAllCard() {\r\n      if( this.isAuth ) {\r\n        this.setError({ message: { success: [ 'Вы успешно выкупили весь магазин (^-^)' ] }, code: 200 })\r\n        this.clearCart()\r\n        router.push('/')\r\n      } else {\r\n        this.setError({ message: { success: [ 'Только авторизованные пользователи могут покупать нашу мангу (-_-)' ] }, code: 401 })\r\n      }\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters([\r\n      'getAllProductInCart',\r\n      'isAuth'\r\n    ]),\r\n\r\n    totalPrice() {\r\n      const arr = this.getAllProductInCart\r\n      return arr.reduce( ( prev, el ) => prev + ( el.price * el.quantity ) ,0)\r\n    }\r\n  },\r\n\r\n  components: {\r\n    'v-table': vTable,\r\n  },\r\n\r\n  created() {\r\n\r\n  }\r\n}\r\n</script>","import { render } from \"./CartView.vue?vue&type=template&id=5ee07e9c\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\my work files\\\\asik\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <table id=\"my-table\">\r\n      \r\n      <thead>\r\n        <tr>\r\n          <th v-for=\"el in head\" :key=\"el\">{{ el.name }}</th>\r\n        </tr>\r\n      </thead>\r\n      \r\n      <tbody>\r\n        <tr \r\n          v-for=\"(row, index) in rows\" :key=\"index\"\r\n          :class=\"{ 'active': dropIndex === index, 'edit': row.editable }\"\r\n          @dragstart=\"!row.editable && dragStart(index, $event)\" \r\n          @dragenter.prevent=\"dragEnter(index)\" \r\n          @dragleave=\"dragLeave(index)\" \r\n          @drop.prevent=\"drop(index)\"\r\n          @dragend=\"dragEnd($event)\" \r\n          @dragover.prevent\r\n          :draggable=\"true\" \r\n        >\r\n          <td \r\n            @dblclick.prevent=\"el.edit === true && startEdit( row, el.path, index )\"\r\n            v-for=\"(el, indexH) in head\" :key=\"indexH\" \r\n          >\r\n            <p class=\"text\" v-show=\"!row.editable\" :style=\"{ width: el?.width }\">\r\n              {{ el.subpath ? row[ el.path ]?.[ el.subpath ] : row[ el.path ]  }}{{ el.prefix }}\r\n            </p>\r\n\r\n            <input\r\n              :value=\"el.subpath ? row[ el.path ]?.[ el.subpath ] : row[ el.path ]\"\r\n              @keypress.enter.prevent=\"stopEdit( row, index )\"\r\n              @keypress.esc.prevent=\"stopResetEdit( row )\"\r\n              v-show=\"row.editable && el.edit === true\"\r\n              autofocuss=\"true\"\r\n              :type=\"el.type\"\r\n              :ref=\"el.path\"\r\n            >\r\n\r\n            <v-list \r\n              v-if=\"row.editable && el.type === 'list'\"\r\n              :ref=\"`list-${ indexH }`\"\r\n              @selectRow=\"selectRow\"\r\n              :cIndex=\"indexH\"\r\n              :head=\"el.head\"\r\n              :rows=\"el.list\"\r\n              :path=\"el.path\"\r\n              :rIndex=\"index\"\r\n              :row=\"row\"\r\n            >\r\n            </v-list>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations } from 'vuex';\r\nimport vList from './vList.vue';\r\n\r\nexport default {\r\n  name: 'vTable',\r\n\r\n  props: {\r\n    header: {\r\n      required: true,\r\n      type: Array\r\n    },\r\n\r\n    body: {\r\n      required: true,\r\n      type: Array\r\n    },\r\n  },\r\n\r\n  data: () => ({\r\n    dragIndex: null,\r\n    dropIndex: null,\r\n    head: [],\r\n    rows: [],\r\n  }),\r\n\r\n  methods: {\r\n    ...mapMutations([\r\n      'setError'\r\n    ]),\r\n\r\n    dragStart( index, event ) {\r\n      this.dragIndex = index;\r\n      event.dataTransfer.setData( \"text/plain\", index );\r\n    },\r\n    \r\n    dragEnd() {\r\n      this.dragIndex = null;\r\n      this.dropIndex = null;\r\n    },\r\n\r\n    dragEnter( index ) {\r\n      if (this.dragIndex !== null && index !== this.dragIndex) {\r\n        this.dropIndex = index;\r\n      }\r\n    },\r\n\r\n    dragLeave( index ) {\r\n      if ( this.dropIndex === index ) {\r\n        this.dropIndex = null;\r\n      }\r\n    },\r\n\r\n    drop() {\r\n      if ( this.dropIndex !== null ) {\r\n        const draggedRow = this.rows[ this.dragIndex ];\r\n        this.rows.splice( this.dragIndex, 1 );\r\n        this.rows.splice( this.dropIndex, 0, draggedRow );\r\n        this.dragIndex = null;\r\n        this.dropIndex = null;\r\n      }\r\n    },\r\n\r\n    startEdit( el, elRef, elIndex ) {\r\n      this.rows.map( ( el, index ) => {\r\n        el.editable === true && this.stopEdit( el, index )\r\n      })\r\n\r\n      el.editable = true\r\n\r\n      this.$nextTick(() => {\r\n        this.$refs[ elRef ][ elIndex ].focus()\r\n      })\r\n    },\r\n\r\n    stopEdit( el, elIndex ) {\r\n      this.head.forEach( ({ path, subpath, edit }) => {\r\n        if( !edit ) return\r\n        \r\n        subpath\r\n          ? this.rows[ elIndex ][ path ][ subpath ] = this.$refs[ path ][ elIndex ].value\r\n          : this.rows[ elIndex ][ path ] = this.$refs[ path ][ elIndex ].value\r\n      });\r\n\r\n      el.editable = false\r\n    },\r\n\r\n    stopResetEdit( el ) {\r\n      el.editable = false\r\n    },\r\n\r\n    selectRow( row, rIndex, cIndex, path, el ) {\r\n      this.$refs[`list-${ cIndex }`][0].close()\r\n      row[ path ] = el\r\n\r\n      this.head.forEach( ({ path, subpath, edit }) => {\r\n        if( !edit ) return\r\n        \r\n        subpath\r\n          ? this.rows[ rIndex ][ path ][ subpath ] = this.$refs[ path ][ rIndex ].value\r\n          : this.rows[ rIndex ][ path ] = this.$refs[ path ][ rIndex ].value\r\n      });\r\n    },\r\n\r\n    addNewRow() {\r\n      const findNewObj = this.rows.find( el => el.new )\r\n      \r\n      if( findNewObj ){\r\n        this.setError({ \r\n          message: {\r\n            success: [ 'У вас уже есть один добавленный но не сохраненный элемент. Сохраните и добавляйте новые!' ],\r\n          },\r\n\r\n          code: 401\r\n        })\r\n\r\n        return\r\n      }\r\n\r\n      const obj = { index: null, ...this.rows[0], new: true }\r\n\r\n      Object\r\n        .keys( obj )\r\n        .forEach( key => {\r\n          if ( key === 'editable' ) obj[ key ] = false\r\n          else if ( key === 'new' ) obj[ key ] = true\r\n          else obj[ key ] = null\r\n        })\r\n      \r\n      console.log( obj );\r\n\r\n      this.rows.unshift( obj )\r\n\r\n      this.setError({ \r\n        message: {\r\n          success: [ 'Новая строка добавлена в таблицу (^-^)' ],\r\n        },\r\n\r\n        code: 200\r\n      })\r\n    },\r\n\r\n    renderData() {\r\n      if( this.rows.some( el => el.editable ) ) return { \r\n        message: {\r\n          success: [ 'Нельзя сохранить данные в режиме редоктирования' ],\r\n        },\r\n\r\n        code: 401\r\n      }\r\n      \r\n      setTimeout(() => {\r\n        this.tableMounted()\r\n      }, 1500)\r\n\r\n      return this.rows\r\n    },\r\n\r\n    deleteRow() {\r\n      const data = this.rows.find( ( el ) => el.editable)\r\n\r\n      if( !data ) return { \r\n        message: {\r\n          success: [ 'Невозможно удалить не выбранную строку' ],\r\n        },\r\n\r\n        code: 401\r\n      }\r\n\r\n      setTimeout(() => {\r\n        this.tableMounted()\r\n      }, 1500)\r\n\r\n      return data\r\n    },\r\n\r\n    tableMounted() {\r\n      this.rows = this.body.map((row) => ({ ...row, editable: false, editField: null }));\r\n    }\r\n  },\r\n\r\n  components: {\r\n    'v-list': vList\r\n  },\r\n\r\n  created() {\r\n    this.head = this.header\r\n    this.rows = this.body\r\n  },\r\n\r\n  mounted() {\r\n    this.tableMounted()\r\n  }\r\n};\r\n</script>","<template>\r\n  <div class=\"list\">\r\n    <p class=\"list__title\" @click=\"show = true\">показать список</p>\r\n    \r\n    <div class=\"list__body\" v-if=\"show\">\r\n      <table class=\"list__table\">\r\n        <thead>\r\n          <tr>\r\n            <th v-for=\"el in head\" :key=\"el\">{{ el.name }}</th>\r\n          </tr>\r\n        </thead>\r\n        \r\n        <tbody>\r\n          <tr v-for=\"(row, index) in rows\" :key=\"index\">\r\n            <td \r\n              @click=\"$emit( 'selectRow', this.row, this.rIndex, this.cIndex, this.path, row )\"\r\n              v-for=\"(el, indexH) in head\" :key=\"indexH\" \r\n            >\r\n              {{ el.subpath ? row[ el.path ]?.[ el.subpath ] : row[ el.path ]  }}{{ el.prefix }}\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <button class=\"list__btn\" @click=\"show = false\">Выйти</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'vList',\r\n\r\n  props: {\r\n    head: {\r\n      required: true,\r\n      type: Array\r\n    },\r\n\r\n    rows: {\r\n      required: true,\r\n      type: Array\r\n    },\r\n\r\n    path: {\r\n      required: true,\r\n      type: String\r\n    },\r\n\r\n    cIndex: {\r\n      required: true,\r\n      type: Number\r\n    },\r\n\r\n    rIndex: {\r\n      required: true,\r\n      type: Number\r\n    },\r\n\r\n    row: {\r\n      required: true,\r\n      type: Object\r\n    },\r\n  },\r\n\r\n  data: () => ({\r\n    show: false\r\n  }),\r\n\r\n  watch: {\r\n\r\n  },\r\n  \r\n  methods: {\r\n    close() {\r\n      this.show = false\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    \r\n  },\r\n\r\n  components: {\r\n    \r\n  },\r\n\r\n  created() {\r\n  \r\n  }\r\n}\r\n</script>","import { render } from \"./vList.vue?vue&type=template&id=3fadc880\"\nimport script from \"./vList.vue?vue&type=script&lang=js\"\nexport * from \"./vList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\my work files\\\\asik\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./vTable.vue?vue&type=template&id=44de99f8\"\nimport script from \"./vTable.vue?vue&type=script&lang=js\"\nexport * from \"./vTable.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\my work files\\\\asik\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["tryToString","$TypeError","TypeError","module","exports","O","P","$","toObject","lengthOfArrayLike","setArrayLength","deletePropertyOrThrow","doesNotExceedSafeInteger","INCORRECT_RESULT","unshift","properErrorOnNonWritableLength","Object","defineProperty","writable","error","FORCED","target","proto","arity","forced","item","this","len","argCount","arguments","length","k","to","j","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_v_table","header","body","_ctx","_hoisted_3","$options","onClick","name","data","watch","methods","mapMutations","buyAllCard","isAuth","setError","message","success","code","clearCart","router","computed","mapGetters","totalPrice","arr","getAllProductInCart","reduce","prev","el","price","quantity","components","vTable","created","__exports__","render","id","_Fragment","key","row","index","editable","onDragstart","$event","onDragenter","onDragleave","onDrop","onDragend","onDragover","draggable","indexH","onDblclick","edit","path","style","width","subpath","prefix","value","onKeypress","autofocuss","type","ref","_createBlock","_component_v_list","onSelectRow","cIndex","head","rows","list","rIndex","$props","props","required","Array","String","Number","show","close","dragIndex","dropIndex","dragStart","event","dataTransfer","setData","dragEnd","dragEnter","dragLeave","drop","draggedRow","splice","startEdit","elRef","elIndex","map","stopEdit","$nextTick","$refs","focus","forEach","stopResetEdit","selectRow","addNewRow","findNewObj","find","new","obj","keys","console","log","renderData","some","setTimeout","tableMounted","deleteRow","editField","vList","mounted"],"sourceRoot":""}
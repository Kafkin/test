"use strict";(self["webpackChunkstandart_project"]=self["webpackChunkstandart_project"]||[]).push([[833],{5117:function(t,e,r){var s=r(6330),a=TypeError;t.exports=function(t,e){if(!delete t[e])throw a("Cannot delete property "+s(e)+" of "+s(t))}},541:function(t,e,r){var s=r(2109),a=r(7908),n=r(6244),i=r(3658),o=r(5117),d=r(7207),l=1!==[].unshift(0),h=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},u=l||!h();s({target:"Array",proto:!0,arity:1,forced:u},{unshift:function(t){var e=a(this),r=n(e),s=arguments.length;if(s){d(r+s);var l=r;while(l--){var h=l+s;l in e?e[h]=e[l]:o(e,h)}for(var u=0;u<s;u++)e[u]=arguments[u]}return i(e,r+s)}})},2833:function(t,e,r){r.r(e),r.d(e,{default:function(){return b}});var s=r(6252),a=r(3577);const n={class:"page cart"},i={class:"cart__container"},o={class:"cart__total-price"};function d(t,e,r,d,l,h){const u=(0,s.up)("v-table");return(0,s.wg)(),(0,s.iD)("section",n,[(0,s._)("div",i,[(0,s.Wm)(u,{header:[{name:"Название",path:"title",subpath:null,prefix:null},{name:"Возраст",path:"ageLimit",subpath:"name",prefix:"+"},{name:"Кратегория",path:"category",subpath:"name",prefix:null},{name:"Количество",path:"quantity",subpath:null,prefix:null},{name:"Цена за шт",path:"price",subpath:null,prefix:"$"}],body:t.getAllProductInCart},null,8,["body"]),(0,s._)("p",o,"Общая цена: "+(0,a.zw)(h.totalPrice)+"$",1),(0,s._)("button",{class:"cart__btn",onClick:e[0]||(e[0]=(...t)=>h.buyAllCard&&h.buyAllCard(...t))},"купить")])])}r(7658);var l=r(2423),h=r(3907),u=r(3229),c={name:"CartView",data:()=>({}),watch:{},methods:{...(0,h.OI)(["clearCart","setError"]),buyAllCard(){this.isAuth?(this.setError({message:{success:["Вы успешно выкупили весь магазин (^-^)"]},code:200}),this.clearCart(),u.Z.push("/")):this.setError({message:{success:["Только авторизованные пользователи могут покупать нашу мангу (-_-)"]},code:401})}},computed:{...(0,h.Se)(["getAllProductInCart","isAuth"]),totalPrice(){const t=this.getAllProductInCart;return t.reduce(((t,e)=>t+e.price*e.quantity),0)}},components:{"v-table":l.Z},created(){}},p=r(3744);const w=(0,p.Z)(c,[["render",d]]);var b=w},2423:function(t,e,r){r.d(e,{Z:function(){return D}});var s=r(6252),a=r(3577),n=r(9963);const i={id:"my-table"},o=["onDragstart","onDragenter","onDragleave","onDrop"],d=["onDblclick"],l=["value","onKeypress","type"];function h(t,e,r,h,u,c){const p=(0,s.up)("v-list");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("table",i,[(0,s._)("thead",null,[(0,s._)("tr",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.head,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t},(0,a.zw)(t.name),1)))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.rows,((r,i)=>((0,s.wg)(),(0,s.iD)("tr",{key:i,class:(0,a.C_)({active:t.dropIndex===i,edit:r.editable}),onDragstart:t=>!r.editable&&c.dragStart(i,t),onDragenter:(0,n.iM)((t=>c.dragEnter(i)),["prevent"]),onDragleave:t=>c.dragLeave(i),onDrop:(0,n.iM)((t=>c.drop(i)),["prevent"]),onDragend:e[0]||(e[0]=t=>c.dragEnd(t)),onDragover:e[1]||(e[1]=(0,n.iM)((()=>{}),["prevent"])),draggable:!0},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.head,((t,e)=>((0,s.wg)(),(0,s.iD)("td",{onDblclick:(0,n.iM)((e=>!0===t.edit&&c.startEdit(r,t.path,i)),["prevent"]),key:e},[(0,s.wy)((0,s._)("p",{class:"text",style:(0,a.j5)({width:t?.width})},(0,a.zw)(t.subpath?r[t.path]?.[t.subpath]:r[t.path])+(0,a.zw)(t.prefix),5),[[n.F8,!r.editable]]),(0,s.wy)((0,s._)("input",{value:t.subpath?r[t.path]?.[t.subpath]:r[t.path],onKeypress:[(0,n.D2)((0,n.iM)((t=>c.stopEdit(r,i)),["prevent"]),["enter"]),(0,n.D2)((0,n.iM)((t=>c.stopResetEdit(r)),["prevent"]),["esc"])],autofocuss:"true",type:t.type,ref_for:!0,ref:t.path},null,40,l),[[n.F8,r.editable&&!0===t.edit]]),r.editable&&"list"===t.type?((0,s.wg)(),(0,s.j4)(p,{key:0,ref_for:!0,ref:`list-${e}`,onSelectRow:c.selectRow,cIndex:e,head:t.head,rows:t.list,path:t.path,rIndex:i,row:r},null,8,["onSelectRow","cIndex","head","rows","path","rIndex","row"])):(0,s.kq)("",!0)],40,d)))),128))],42,o)))),128))])])])}r(541);var u=r(3907);const c={class:"list"},p={key:0,class:"list__body"},w={class:"list__table"},b=["onClick"];function g(t,e,r,n,i,o){return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("p",{class:"list__title",onClick:e[0]||(e[0]=e=>t.show=!0)},"показать список"),t.show?((0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("table",w,[(0,s._)("thead",null,[(0,s._)("tr",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.head,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t},(0,a.zw)(t.name),1)))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.rows,((e,n)=>((0,s.wg)(),(0,s.iD)("tr",{key:n},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.head,((r,n)=>((0,s.wg)(),(0,s.iD)("td",{onClick:r=>t.$emit("selectRow",this.row,this.rIndex,this.cIndex,this.path,e),key:n},(0,a.zw)(r.subpath?e[r.path]?.[r.subpath]:e[r.path])+(0,a.zw)(r.prefix),9,b)))),128))])))),128))])]),(0,s._)("button",{class:"list__btn",onClick:e[1]||(e[1]=e=>t.show=!1)},"Выйти")])):(0,s.kq)("",!0)])}var f={name:"vList",props:{head:{required:!0,type:Array},rows:{required:!0,type:Array},path:{required:!0,type:String},cIndex:{required:!0,type:Number},rIndex:{required:!0,type:Number},row:{required:!0,type:Object}},data:()=>({show:!1}),watch:{},methods:{close(){this.show=!1}},computed:{},components:{},created(){}},y=r(3744);const v=(0,y.Z)(f,[["render",g]]);var m=v,x={name:"vTable",props:{header:{required:!0,type:Array},body:{required:!0,type:Array}},data:()=>({dragIndex:null,dropIndex:null,head:[],rows:[]}),methods:{...(0,u.OI)(["setError"]),dragStart(t,e){this.dragIndex=t,e.dataTransfer.setData("text/plain",t)},dragEnd(){this.dragIndex=null,this.dropIndex=null},dragEnter(t){null!==this.dragIndex&&t!==this.dragIndex&&(this.dropIndex=t)},dragLeave(t){this.dropIndex===t&&(this.dropIndex=null)},drop(){if(null!==this.dropIndex){const t=this.rows[this.dragIndex];this.rows.splice(this.dragIndex,1),this.rows.splice(this.dropIndex,0,t),this.dragIndex=null,this.dropIndex=null}},startEdit(t,e,r){this.rows.map(((t,e)=>{!0===t.editable&&this.stopEdit(t,e)})),t.editable=!0,this.$nextTick((()=>{this.$refs[e][r].focus()}))},stopEdit(t,e){this.head.forEach((({path:t,subpath:r,edit:s})=>{s&&(r?this.rows[e][t][r]=this.$refs[t][e].value:this.rows[e][t]=this.$refs[t][e].value)})),t.editable=!1},stopResetEdit(t){t.editable=!1},selectRow(t,e,r,s,a){this.$refs[`list-${r}`][0].close(),t[s]=a,this.head.forEach((({path:t,subpath:r,edit:s})=>{s&&(r?this.rows[e][t][r]=this.$refs[t][e].value:this.rows[e][t]=this.$refs[t][e].value)}))},addNewRow(){const t=this.rows.find((t=>t.new));if(t)return void this.setError({message:{success:["У вас уже есть один добавленный но не сохраненный элемент. Сохраните и добавляйте новые!"]},code:401});const e={index:null,...this.rows[0],new:!0};Object.keys(e).forEach((t=>{e[t]="editable"!==t&&("new"===t||null)})),console.log(e),this.rows.unshift(e),this.setError({message:{success:["Новая строка добавлена в таблицу (^-^)"]},code:200})},renderData(){return this.rows.some((t=>t.editable))?{message:{success:["Нельзя сохранить данные в режиме редоктирования"]},code:401}:(setTimeout((()=>{this.tableMounted()}),1500),this.rows)},deleteRow(){const t=this.rows.find((t=>t.editable));return t?(setTimeout((()=>{this.tableMounted()}),1500),t):{message:{success:["Невозможно удалить не выбранную строку"]},code:401}},tableMounted(){this.rows=this.body.map((t=>({...t,editable:!1,editField:null})))}},components:{"v-list":m},created(){this.head=this.header,this.rows=this.body},mounted(){this.tableMounted()}};const _=(0,y.Z)(x,[["render",h]]);var D=_}}]);
//# sourceMappingURL=833.fe441d9d.js.map